<!DOCTYPE html>
<html>
<head>
	<title>Link a new database</title>
	<meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
</head>
<body>
	<div align="center">
		<h3>Link a new database</h3>
	</div>
	<form>
		<div class="container">
			<label>Enter database name</label>
			<input type="text" id="databaseName" autofocus>
			<label>Enter host name</label>
			<input type="text" id="hostName" autofocus>
			<label>Enter username</label>
			<input type="text" id="dUsername" autofocus>
			<label>Enter password</label>
			<input type="text" id="dPassword" autofocus>
			<label>Enter port</label>
			<input type="text" id="dPort" autofocus>
			<button class="btn waves-effect waves-light" type="submit">Connect</button>
			<br>
		</div>
	</form>

	<script>
		const electron = require('electron');
		const {ipcRenderer} = electron;

		function wait(ms) {
			var d = new Date();
			var d2 = null;
			do { 
				d2 = new Date(); 
			}
			while(d2-d < ms);
		}

		const form = document.querySelector('form');
		form.addEventListener('submit', submitForm);

		function submitForm(e){
			e.preventDefault();
			const database = document.querySelector('#databaseName').value;
			const hostname = document.querySelector('#hostName').value;
			const username = document.querySelector('#dUsername').value;
			const password = document.querySelector('#dPassword').value;
			const port = document.querySelector('#dPort').value;
			ipcRenderer.send('database:add', database);
			ipcRenderer.send('host:add', hostname);
			ipcRenderer.send('user:add', username);
			ipcRenderer.send('pass:add', password);
			ipcRenderer.send('port:add', port);
			ipcRenderer.send('connected');
		}
	</script>
</body>
</html>